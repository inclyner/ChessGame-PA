package pt.isec.pa.chess.model.data;

import java.io.Serial;
import java.io.Serializable;


//Facade
public class ChessGame implements Serializable {
    @Serial
    static final long serialVersionUID = 100L;

    private Board board;
    private Player whitePlayer;
    private Player blackPlayer;
    private Player currentPlayer;
    private int moveCount;


    public ChessGame() {
        this.board = new Board();
        this.whitePlayer = new Player(true);
        this.blackPlayer = new Player(false);
        this.currentPlayer = whitePlayer;
        this.moveCount = 0;
    }


    boolean move(Square from,Square to){
        //TODO move method
        return false;
    }

    private void switchPlayer() {
        currentPlayer = (currentPlayer == whitePlayer) ? blackPlayer : whitePlayer;
    }


    public boolean checkEndGame() {
        return board.checkEndGame();
    }



    public void importGame(String gameState) {
        String[] split = gameState.split(",", 2);
        this.currentPlayer = split[0].equalsIgnoreCase("WHITE") ? whitePlayer : blackPlayer;
        this.board = new Board(); // recriar o board vazio
        this.board.importGame(split[1]);
    }
}
